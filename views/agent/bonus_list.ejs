<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <%- include('../includes/head.ejs') %>
  </head>


  <body>

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
        <%- include('../includes/menu.ejs') %>
      
        <%- include('../includes/top.ejs') %>
      <div class="content">
        <%- include('../includes/nav.ejs') %>

        <h2 class="text-bold text-1100 mb-5"><%=basicInfo.title%></h2>
        
        <div id="members" >
          <div class="mb-4">
            <div class="d-flex flex-wrap gap-5">
                <%- include('../includes/datepicker.ejs') %>
               
               
                <div class="col-1 ">
                    <select class="form-select" id="srchOption">
                        <option value="0" <% if ( basicInfo.search.srchOption == "0") { %> selected <% } %>>선택</option>
                        <option value="1" <% if ( basicInfo.search.srchOption == "1") { %> selected <% } %>>아이디</option>
                        <option value="2" <% if ( basicInfo.search.srchOption == "2") { %> selected <% } %>>에이전트</option>
                    </select>
                </div>
                <div class="search-box">
                    <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                    <input class="form-control search-input search" id="srchText" type="search" placeholder="선택 조회" aria-label="Search" value="<%= basicInfo.search.srchText %>"/>
                    <span class="fas fa-search search-box-icon"></span>
                    </form>
                </div>
              <div class="col-1">
                <button class="btn btn-outline-primary me-1 mb-1" type="button" onClick="fnSearch()" >검색</button>
              </div>
            </div>
          </div>
          <div class="row align-items-end justify-content-between pb-3 g-2">
            <div class="col-auto">
                <select class="form-select" id="rowsPerPage" onchange="fnSearch()">
                    <option value="10" <% if ( basicInfo.search.rowsPerPage == "10") { %> selected <% } %>>10</option>
                    <option value="20" <% if ( basicInfo.search.rowsPerPage == "20") { %> selected <% } %>>20</option>
                    <option value="50" <% if ( basicInfo.search.rowsPerPage == "50") { %> selected <% } %>>50</option>
                    <option value="100" <% if ( basicInfo.search.rowsPerPage == "100") { %> selected <% } %>>100</option>
                </select>
            </div>
           
        </div>
          <div class="mx-n4 mx-lg-n6 px-4 px-lg-6 mb-9 bg-white border-y border-300 mt-2 position-relative top-1">
            <div class="table-responsive scrollbar ms-n1 ps-1">
              <table class="table table-sm fs--1 mb-0">
                <thead>
                  <tr>
                    <th class="sort align-middle" scope="col"  style="width:10%; ">에이전트 </th>
                    <!-- <th class="sort align-middle" scope="col"  style="width:10%; ">회원 위치</th> -->
                    <th class="sort align-middle" scope="col"  style="width:10%; ">담당 회원</th>
                    <th class="sort align-middle" scope="col"  style="width:10%; ">지급율</th>
                    <th class="sort align-middle" scope="col"  style="width:10%; ">포인트차감수량</th>
                    <th class="sort align-middle" scope="col"  style="width:10%; ">지급보너스</th>
                    <th class="sort align-middle" scope="col"  style="width:10%; ">발생일자</th>
                  </tr>
                </thead>
                <tbody class="list" id="members-table-body">
                    <%
                    if (basicInfo.bounsList.length > 0) {
                    basicInfo.bounsList.forEach(function (el) { 
                    %>
                  <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                    <td class="mobile_number align-middle white-space-nowrap"><%=el.mem_agent %></td>
                     -->
                    <td class="city align-middle white-space-nowrap text-900"><%=el.mem_id %></td>
                    <td class="align-middle white-space-nowrap text-700 "><%=el.a_rate %>%</td>
                    <td class="align-middle white-space-nowrap text-700 "><%=el.cf_unit %></td>
                    <td class="align-middle white-space-nowrap text-700 "><%=el.p_bonus %></td>
                    <td class="align-middle white-space-nowrap text-700 "><%=el.crt_dt %></td>
                    </td>
                  </tr>
                  <% } ) } %>
                </tbody>
              </table>
            </div>
            
            <%- include('../includes/paging.ejs') %>
          </div>
        </div>
        <!-- footer -->
        <%- include('../includes/footer.ejs') %>
      </div>
   
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->
 
    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <%- include('../includes/scripts.ejs') %>
    <script src="https://code.jquery.com/jquery-3.6.3.js"></script>
    <%- include('../includes/confirmModal.ejs') %>
    <%- include('../includes/modal.ejs') %>
    <input type="hidden" id="delSeq" value="" />
    <script>
        window.onload = function(){};

        function fnSearch() {

          let pageIndex = $('#pageIndex').val();
          let rowsPerPage =10;//$('#rowsPerPage').val();
          let srchText = $('#srchText').val();
          let srchOption = $('#srchOption option:selected').val();
          let srchMember = $('#srchMember option:selected').val();

          let srtDt = $('#srtDt').val();
          let endDt = $('#endDt').val();


let form = document.createElement("form");
form.setAttribute("charset", "UTF-8");
form.setAttribute("method", "Post");
form.setAttribute("action", "/a/bonus");

let hiddenField1 = document.createElement("input");
hiddenField1.setAttribute("type", "hidden");
hiddenField1.setAttribute("name", "pageIndex");
hiddenField1.setAttribute("value", pageIndex);
form.appendChild(hiddenField1);

let hiddenField2 = document.createElement("input");
hiddenField2.setAttribute("type", "hidden");
hiddenField2.setAttribute("name", "rowsPerPage");
hiddenField2.setAttribute("value", rowsPerPage);
form.appendChild(hiddenField2);

let hiddenField3 = document.createElement("input");
hiddenField3.setAttribute("type", "hidden");
hiddenField3.setAttribute("name", "srchText");
hiddenField3.setAttribute("value", srchText);
form.appendChild(hiddenField3);

let hiddenField4 = document.createElement("input");
hiddenField4.setAttribute("type", "hidden");
hiddenField4.setAttribute("name", "srchOption");
hiddenField4.setAttribute("value", srchOption);
form.appendChild(hiddenField4);

let hiddenField5 = document.createElement("input");
hiddenField5.setAttribute("type", "hidden");
hiddenField5.setAttribute("name", "srchAuth");
hiddenField5.setAttribute("value", srchAuth);
form.appendChild(hiddenField5);



document.body.appendChild(form);
form.submit();
}
    </script>
  </body>

</html>